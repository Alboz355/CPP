@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer base {
  :root {
    /* Thème clair optimisé */
    --background: 0 0% 98%;
    --foreground: 0 0% 8%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 8%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 8%;
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 0 0% 8%;
    --muted: 210 40% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 210 40% 94%;
    --accent-foreground: 0 0% 8%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 217 91% 60%;
    --radius: 0.75rem;
    
    /* Variables personnalisées pour le design */
    --gradient-primary: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(229 84% 70%) 100%);
    --gradient-secondary: linear-gradient(135deg, hsl(210 40% 96%) 0%, hsl(214 32% 91%) 100%);
    --shadow-soft: 0 2px 8px -2px rgba(0, 0, 0, 0.05);
    --shadow-medium: 0 4px 16px -4px rgba(0, 0, 0, 0.1);
    --shadow-strong: 0 8px 32px -8px rgba(0, 0, 0, 0.15);
    
    /* Sidebar theme colors for light mode */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 0 0% 8%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 210 40% 94%;
    --sidebar-accent-foreground: 0 0% 8%;
    --sidebar-border: 214 32% 91%;
    --sidebar-ring: 217 91% 60%;
  }

  .dark {
    /* Thème sombre amélioré pour WCAG AA compliance */
    --background: 220 13% 9%;
    --foreground: 210 40% 98%;
    --card: 220 13% 12%;
    --card-foreground: 210 40% 95%;
    --popover: 220 13% 12%;
    --popover-foreground: 210 40% 95%;
    --primary: 217 91% 60%;
    --primary-foreground: 210 40% 98%;
    --secondary: 217 19% 20%;
    --secondary-foreground: 210 40% 95%;
    --muted: 217 19% 18%;
    --muted-foreground: 215 20.2% 70%;
    --accent: 217 19% 22%;
    --accent-foreground: 210 40% 95%;
    --destructive: 0 75% 60%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 19% 20%;
    --input: 217 19% 18%;
    --ring: 217 91% 60%;
    
    /* Sidebar theme colors for dark mode */
    --sidebar-background: 220 13% 11%;
    --sidebar-foreground: 210 40% 95%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 217 19% 22%;
    --sidebar-accent-foreground: 210 40% 95%;
    --sidebar-border: 217 19% 18%;
    --sidebar-ring: 217 91% 60%;
    
    /* Variables personnalisées pour le thème sombre */
    --gradient-primary: linear-gradient(135deg, hsl(217 91% 60%) 0%, hsl(229 84% 70%) 100%);
    --gradient-secondary: linear-gradient(135deg, hsl(217 19% 18%) 0%, hsl(217 19% 22%) 100%);
    --shadow-soft: 0 2px 8px -2px rgba(0, 0, 0, 0.4);
    --shadow-medium: 0 4px 16px -4px rgba(0, 0, 0, 0.5);
    --shadow-strong: 0 8px 32px -8px rgba(0, 0, 0, 0.6);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* Optimisations iOS */
  @supports (-webkit-touch-callout: none) {
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  }

  /* Optimisations Windows */
  @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
    body {
      font-smoothing: antialiased;
    }
  }
}

@layer components {
  /* Composants personnalisés pour mobile */
  .mobile-container {
    @apply max-w-md mx-auto min-h-screen bg-background;
  }

  .mobile-header {
    @apply sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60;
    padding-top: env(safe-area-inset-top);
  }

  .mobile-content {
    @apply flex-1 overflow-auto;
    padding-bottom: env(safe-area-inset-bottom);
  }

  .mobile-bottom-nav {
    @apply fixed bottom-0 left-0 right-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60;
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Cards avec design moderne */
  .modern-card {
    @apply bg-card border border-border rounded-xl shadow-sm hover:shadow-md transition-all duration-300;
    background: var(--gradient-secondary);
  }

  .glass-card {
    @apply bg-card/80 backdrop-blur-md border border-border/50 rounded-xl shadow-lg;
  }

  /* Boutons avec design iOS */
  .ios-button {
    @apply inline-flex items-center justify-center rounded-xl px-6 py-3 text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }

  .ios-button-primary {
    @apply ios-button bg-primary text-primary-foreground hover:bg-primary/90 active:scale-95;
    background: var(--gradient-primary);
  }

  .ios-button-secondary {
    @apply ios-button bg-secondary text-secondary-foreground hover:bg-secondary/80 active:scale-95;
  }

  /* Typography améliorée */
  .heading-1 {
    @apply text-3xl font-bold tracking-tight text-foreground;
  }

  .heading-2 {
    @apply text-2xl font-semibold tracking-tight text-foreground;
  }

  .heading-3 {
    @apply text-xl font-semibold text-foreground;
  }

  .body-text {
    @apply text-base text-muted-foreground leading-relaxed;
  }

  .caption-text {
    @apply text-sm text-muted-foreground;
  }

  /* Animations fluides */
  .fade-in {
    animation: fadeIn 0.5s ease-out;
  }

  .slide-up {
    animation: slideUp 0.3s ease-out;
  }

  .scale-in {
    animation: scaleIn 0.2s ease-out;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Scrollbar personnalisée pour Windows */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--muted));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5);
}

/* Support pour les écrans haute densité */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .crisp-edges {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Optimisations pour les petits écrans */
@media (max-width: 375px) {
  .mobile-container {
    @apply px-3;
  }
  
  .heading-1 {
    @apply text-2xl;
  }
  
  .heading-2 {
    @apply text-xl;
  }
}

/* Optimisations pour les grands écrans (Windows/Desktop) */
@media (min-width: 768px) {
  .mobile-container {
    @apply max-w-lg;
  }
}

/* Optimisations pour les très grands écrans */
@media (min-width: 1024px) {
  .mobile-container {
    @apply max-w-none h-screen flex;
  }
  
  /* Desktop layout styles */
  .desktop-layout {
    @apply flex h-screen bg-background;
  }
  
  .desktop-sidebar {
    @apply w-64 bg-sidebar border-r border-sidebar-border flex-shrink-0;
  }
  
  .desktop-main {
    @apply flex-1 flex flex-col min-w-0 bg-background;
  }
  
  .desktop-header {
    @apply border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-6 py-4;
  }
  
  .desktop-content {
    @apply flex-1 overflow-auto p-6;
  }
  
  /* Desktop card layouts */
  .desktop-grid {
    @apply grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6;
  }
  
  .desktop-card {
    @apply bg-card border border-border rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-300;
  }
  
  /* Desktop navigation styles */
  .desktop-nav-item {
    @apply flex items-center px-4 py-3 text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground rounded-lg transition-colors;
  }
  
  .desktop-nav-item.active {
    @apply bg-sidebar-accent text-sidebar-accent-foreground font-medium;
  }
}

/* Mode sombre spécifique pour les images */
.dark img {
  filter: brightness(0.9) contrast(1.1);
}

.dark .crypto-logo {
  filter: brightness(1.2) saturate(1.1);
}

/* Transitions fluides pour le changement de thème */
* {
  transition-property: background-color, border-color, color, fill, stroke, box-shadow;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 300ms;
}

/* Focus visible amélioré pour l'accessibilité */
.focus-visible {
  @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
}

/* États hover améliorés */
.hover-lift {
  @apply transition-transform duration-200 hover:scale-105 hover:shadow-lg;
}

.hover-glow {
  @apply transition-all duration-300 hover:shadow-lg hover:shadow-primary/25;
}